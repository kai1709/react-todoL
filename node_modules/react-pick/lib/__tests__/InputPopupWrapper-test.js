"use strict";

var InputPopupWrapper = require("../InputPopupWrapper");
var React = require("react/addons");

var TestUtils = React.addons.TestUtils;
var Simulate = React.addons.TestUtils.Simulate;

var expect = require("expect");
var emptyFunction = require("../helpers/emptyFunction");

describe("InputPopupWrapper", function () {

  it("should decorate <input> and the popup with ARIA attrs", function () {
    var ctx = TestUtils.renderIntoDocument(React.createElement(
      InputPopupWrapper,
      { isOpen: true },
      React.createElement("input", null)
    ));

    var input = TestUtils.findRenderedDOMComponentWithTag(ctx, "input");
    var menu = TestUtils.findRenderedDOMComponentWithClass(ctx, "InputPopupWrapper-popup");

    var inputAttributes = input.getDOMNode().attributes;
    var menuAttributes = menu.getDOMNode().attributes;

    expect(inputAttributes["aria-expanded"].value).toBe("true");
    expect(inputAttributes["aria-haspopup"].value).toBe("true");
    expect(inputAttributes["aria-owns"].value).toBe(menuAttributes.id.value);
  });
});